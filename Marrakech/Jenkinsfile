pipeline {
  agent any

  stages {
    stage('Build') {
      steps {
      	dir("Marrakech") {
      	  bat 'mvn package'
      	}
      }
    }
    
    stage('Make Container') {
      steps {
      	bat "docker build -t snscaimito/ledger-service:${env.BUILD_ID} ./Marrakech/"
      	bat "docker tag snscaimito/ledger-service:${env.BUILD_ID} snscaimito/ledger-service:latest"
      }
    }
  }
}