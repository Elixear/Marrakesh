final FULL_BUILD = params.FULL_BUILD

final PROJECT_TYPE = 'java'

pipeline {
  agent any

  stages {
    stage("Provision") {
  	  provision(PROJECT_TYPE)
    }
  	
    stage('Build') {
      steps {
      	dir("Marrakech") {
      	  bat 'mvn package'
      	}
      }
    }
    
    stage('Make Container') {
      steps {
      	bat "docker build -t snscaimito/ledger-service:${env.BUILD_ID} ./Marrakech/"
      	bat "docker tag snscaimito/ledger-service:${env.BUILD_ID} snscaimito/ledger-service:latest"
      }
    }
  }
}
